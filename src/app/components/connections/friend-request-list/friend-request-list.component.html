<div class="mb-4">
    <h6 class="text-muted mb-3">Received</h6>
    <div class="scroll-sm">
      <table class="table" *ngIf="receivedLoaded; else loadingReceived">
        <thead>
          <tr>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let request of receivedRequests">
            <td>{{ request.senderUsername }}</td>
            <td>{{ request.senderEmail }}</td>
            <td>
                <button
                    class="btn btn-success btn-sm mr-2"
                    (click)="acceptRequest(request.senderId, request.recipientId)">
                    Accept
                </button>
                <button 
                    class="btn btn-danger btn-sm" 
                    (click)="removeRequest(request.senderId, request.recipientId, true)">
                    Reject
                </button>
            </td>
          </tr>
          <tr *ngIf="receivedRequests.length === 0">
            <td colspan="3" class="text-muted">No received requests.</td>
          </tr>
        </tbody>
      </table>
      <ng-template #loadingReceived>
        <p>Loading received requests...</p>
      </ng-template>
    </div>
  </div>
  
  <div>
    <h6 class="text-muted mb-3">Sent</h6>
    <div class="scroll-sm">
      <table class="table" *ngIf="sentLoaded; else loadingSent">
        <thead>
          <tr>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let request of sentRequests">
            <td>{{ request.recipientUsername }}</td>
            <td>{{ request.recipientEmail }}</td>
            <td>
                <button 
                    class="btn btn-danger btn-sm" 
                    (click)="removeRequest(request.senderId, request.recipientId, false)">
                    Delete
                </button>
            </td>
          </tr>
          <tr *ngIf="sentRequests.length === 0">
            <td colspan="3" class="text-muted">No sent requests.</td>
          </tr>
        </tbody>
      </table>
      <ng-template #loadingSent>
        <p>Loading sent requests...</p>
      </ng-template>
    </div>
  </div>